webpackJsonpVueDmComponents([49],{1054:function(t,e,n){var a=n(1055);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n(2)("6ffbe03a",a,!0,{})},1055:function(t,e,n){e=t.exports=n(1)(!1),e.push([t.i,"",""])},1056:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-alert",{attrs:{title:"node.js配合jwt(jsonwebtoken)来实现token的生成和校验，前端在ajax请求时在headers加上token数据",type:"warning"}}),t._v(" "),n("dm_pannel_new",{attrs:{title:"token附加参数设置"}},[n("div",{staticClass:"PT10"},[n("dm_dynamic_form",{attrs:{cf:t.cfForm},model:{value:t.formData,callback:function(e){t.formData=e},expression:"formData"}})],1)]),t._v(" "),n("dm_pannel_new",{staticClass:"MB20",attrs:{title:"生成/更新token"}},[n("dm_space",{attrs:{height:"10"}}),t._v(" "),n("el-button",{attrs:{plain:"",size:"mini"},on:{click:t.getToken}},[t._v("测试getToken")]),t._v(" "),n("div",{staticClass:"MB10 MT10"},[n("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入内容"},on:{change:t.changeTextarea},model:{value:t.token,callback:function(e){t.token=e},expression:"token"}})],1)],1),t._v(" "),n("dm_pannel_new",{staticClass:"MB20",attrs:{title:"测试生成的token"}},[n("dm_space",{attrs:{height:"10"}}),t._v(" "),n("el-button",{attrs:{plain:"",size:"mini"},on:{click:t.validToken}},[t._v("测试validToken接口")]),t._v(" "),n("div",{staticClass:"MT10"},[t._v("校验结果："+t._s(t.dataValid))]),t._v(" "),n("dm_space",{attrs:{height:"20"}}),t._v(" "),n("el-button",{attrs:{plain:"",size:"mini"},on:{click:t.getData}},[t._v("测试testWithToken接口（需要校验token）")]),t._v(" "),n("div",{staticClass:"MT10"},[t._v("请求结果："+t._s(t.dataResult))])],1)],1)},r=[],o={render:a,staticRenderFns:r};e.a=o},940:function(t,e,n){"use strict";function a(t){n(1054)}Object.defineProperty(e,"__esModule",{value:!0});var r=n(997),o=n.n(r);for(var i in r)"default"!==i&&function(t){n.d(e,t,function(){return r[t]})}(i);var s=n(1056),u=n(0),c=a,l=u(o.a,s.a,!1,c,"data-v-386870ee",null);e.default=l.exports},997:function(t,e,n){"use strict";function a(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function a(r,o){try{var i=e[r](o),s=i.value}catch(t){return void n(t)}if(!i.done)return Promise.resolve(s).then(function(t){a("next",t)},function(t){a("throw",t)});t(s)}return a("next")})}}Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t};e.default={components:{},data:function(){return{token:localStorage.tokenCurr,dataValid:null,formData:{trueName:"张三",title:"title1111"},cfForm:{size:"mini",formItems:[F_ITEMS.trueName,F_ITEMS.title]},dataResult:null}},methods:{changeTextarea:function(){localStorage.tokenCurr=this.token},getToken:function(){function t(){return e.apply(this,arguments)}var e=a(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,util.ajaxWithToken({method:"post",url:PUB.domain+"/info/getToken",data:{formData:this.formData}});case 2:e=t.sent,n=e.data,this.token=n.token,localStorage.tokenCurr=this.token;case 6:case"end":return t.stop()}},t,this)}));return t}(),validToken:function(){function t(){return e.apply(this,arguments)}var e=a(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,util.ajaxWithToken({method:"post",url:PUB.domain+"/info/validToken",data:{}});case 2:e=t.sent,n=e.data,this.dataValid=n;case 5:case"end":return t.stop()}},t,this)}));return t}(),getData:function(){function t(){return e.apply(this,arguments)}var e=a(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,util.ajaxWithToken({method:"post",url:PUB.domain+"/info/testWithToken",data:{}});case 2:e=t.sent,n=e.data,this.dataResult=n;case 5:case"end":return t.stop()}},t,this)}));return t}()},created:function(){},mounted:function(){function t(){return e.apply(this,arguments)}var e=a(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=this,util.ajaxWithToken=function(t){var e=t.url,n={Token:localStorage.tokenCurr};return axios(r({method:"post",headers:n},t,{url:e}))};case 2:case"end":return t.stop()}},t,this)}));return t}()}}});
//# sourceMappingURL=49.vue-dm-components.js.map